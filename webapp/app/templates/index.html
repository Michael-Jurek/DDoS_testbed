<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/static/main.js"></script>
    <script src="/static/victim.js"></script>

    <title>Botnet control</title>
  </head>
  <body>
    <!-- BOTNET CONFIG -->

    <form id="generate_botnet_form" method="post" action="/generate_botnet">
      <h1>Botnet configuration</h1>
      <label for="bots_number">Number of bots:</label>
      <input
        type="number"
        id="bots_number"
        name="bots_number"
        min="1"
        value="5"
      /><br />

      <label for="cpu_cores_per_container">CPU cores per container:</label>
      <input
        type="number"
        id="cpu_cores_per_container"
        name="cpu_cores_per_container"
        value="1"
      />
      <!-- min="1" -->
      <br />
      <label for="memory_limit">Memory limitation per container:</label>
      <input type="number" id="memory_limit" name="memory_limit" value="500" />
      <!-- min="1" -->
      <select name="memory_unit">
        <option value="MB">MB</option>
        <option value="GB">GB</option></select
      ><br /><br />

      <label for="disk_select">Select Disk to limit IOPS:</label>
      <select id="disk_select" name="disk">
        {% for disk in disks %}
        <option value="{{ disk }}">{{ disk }}</option>
        {% endfor %}
      </select>
      <br />
      <label for="write_iops">Write IOPS:</label>
      <input
        type="number"
        id="write_iops"
        name="write_iops"
        min="0"
        value="500"
      />
      <label for="read_iops">Read IOPS:</label>
      <input
        type="number"
        id="read_iops"
        name="read_iops"
        min="0"
        value="500"
      />
      <br /><br /><input type="submit" value="Generate Bots" />
    </form>
    <!-- <br />
    <label for="swap_memory">Swap memory:</label><br />
    <input type="number" id="swap_memory" name="swap_memory" /><br />
    <br /> -->
    <button id="remove_botnet">Remove botnet</button>
    <form action="show_botnet">
      <input type="submit" value="Show botnet" name="action1" />
    </form>
    <hr />

    <!-- ATTACK CONFIG -->

    <h1>Attack configuration</h1>
    <button id="ping">Ping</button>

    <select id="attack_option">
      <option value="">Select an attack</option>
      <option value="option1" data-form="icmp_flood">ICMP Flood</option>
      <option value="option2" data-form="slowloris_form">Slowloris</option>
    </select>
    <br />
    <form
      id="icmp_flood"
      class="option-form"
      style="display: none"
      action="/icmp_flood"
    >
      <label for="spoof">Spoof the source address?</label>
      <select id="spoof_select" name="spoof">
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>
      <div id="ip_address_input" style="display: none">
        <label for="ip_address">Spoofed IP address:</label>
        <input
          type="text"
          id="ip_address"
          name="ip_address"
          placeholder="Enter IP address"
          value="1.2.3.4"
        />
      </div>

      <br />
      <input type="submit" value="Run ICMP flood" />
      <button id="stop_attack">Stop attack</button>
    </form>

    <form
      id="slowloris_form"
      action="/slowloris"
      class="option-form"
      style="display: none"
    >
      <label for="number_of_connections">Number of connections per bot:</label>

      <input
        type="number"
        id="number_of_connections"
        name="number_of_connections"
        min="1"
        value="50"
      />
      <br />
      <label for="connection_rate">Connection rate per second:</label>

      <input
        type="number"
        id="connection_rate"
        name="connection_rate"
        min="1"
        value="50"
      />
      <br />
      <label for="connection_rate">Attack duration:</label>

      <input
        type="number"
        id="attack_duration"
        name="attack_duration"
        min="1"
        value="30"
      />
      <input type="submit" value="Run slowloris" />
    </form>

    <hr />

    <!-- VICTIM CONFIG -->

    <h1>Victim server configuration</h1>
    <form id="edit_victim_form" method="post" action="/edit_victim">
      <label for="victim_cpu_cores">CPU cores:</label>
      <input
        type="number"
        id="victim_cpu_cores"
        name="victim_cpu_cores"
        min="1"
        value="1"
      /><br />
      <label for="victim_memory_limit">Memory limitation:</label>
      <input
        type="number"
        id="victim_memory_limit"
        name="victim_memory_limit"
        min="1"
        value="500"
      />
      <select id="memory_unit" name="memory_unit">
        <option value="MB">MB</option>
        <option value="GB">GB</option></select
      ><br /><br />

      <!-- <script>
        document
          .getElementById("memory_unit")
          .addEventListener("change", function () {
            var memoryInput = document.getElementById("memory");
            if (this.value === "MB") {
              memoryInput.min = "6";
            } else {
              memoryInput.min = "1";
            }
          });
      </script> -->

      <input type="submit" value="Edit victim resources" />
    </form>

    <!-- MONITORING -->
    <div
      style="
        display: flex;
        align-items: center;
        justify-content: center;
        height: 50px;
        background-color: #f2f2f2;
      "
    >
      <button onclick="window.open('http://localhost:3000', '_blank');">
        Monitoring
      </button>
    </div>
  </body>
</html>
